{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/anastasiapetrova/WebstormProjects/Todol/src/app/areas/1/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useState, useRef, useEffect } from \"react\";\nimport \"../../../styles/relations.css\";\n\nconst relationsSphereConfig = {\n    title: \"–û—Ç–Ω–æ—à–µ–Ω–∏—è\",\n    icon: \"üíï\",\n    accentColor: \"#ec4899\"\n} as const;\n\ntype SubTaskItem = {\n    id: number;\n    description: string;\n    isCompleted: boolean\n};\n\ntype MainTask = {\n    id: number;\n    description: string;\n    isCompleted: boolean;\n    subtasks: SubTaskItem[];\n    areSubtasksVisible: boolean;\n};\n\nexport default function RelationsSphere() {\n    const router = useRouter();\n    const [newMainTaskDescription, setNewMainTaskDescription] = useState(\"\");\n    const [newSubTaskDescription, setNewSubTaskDescription] = useState(\"\");\n    const [mainTasksList, setMainTasksList] = useState<MainTask[]>([]);\n\n    const createMainTask = () => {\n        if (newMainTaskDescription.trim()) {\n            setMainTasksList(prevTasks => [\n                ...prevTasks,\n                {\n                    id: Date.now(),\n                    description: newMainTaskDescription,\n                    isCompleted: false,\n                    subtasks: [],\n                    areSubtasksVisible: false\n                }\n            ]);\n            setNewMainTaskDescription(\"\");\n        }\n    };\n\n    const createSubTask = (parentTaskId: number) => {\n        if (newSubTaskDescription.trim()) {\n            setMainTasksList(prevTasks =>\n                prevTasks.map(task =>\n                    task.id === parentTaskId\n                        ? {\n                            ...task,\n                            subtasks: [\n                                ...task.subtasks,\n                                {\n                                    id: Date.now(),\n                                    description: newSubTaskDescription,\n                                    isCompleted: false\n                                }\n                            ],\n                            areSubtasksVisible: true\n                        }\n                        : task\n                )\n            );\n            setNewSubTaskDescription(\"\");\n        }\n    };\n\n    const toggleMainTaskCompletion = (taskId: number) => {\n        setMainTasksList(prevTasks =>\n            prevTasks.map(task =>\n                task.id === taskId\n                    ? { ...task, isCompleted: !task.isCompleted }\n                    : task\n            )\n        );\n    };\n\n    const toggleSubTaskCompletion = (parentTaskId: number, subTaskId: number) => {\n        setMainTasksList(prevTasks =>\n            prevTasks.map(task =>\n                task.id === parentTaskId\n                    ? {\n                        ...task,\n                        subtasks: task.subtasks.map(subTask =>\n                            subTask.id === subTaskId\n                                ? { ...subTask, isCompleted: !subTask.isCompleted }\n                                : subTask\n                        )\n                    }\n                    : task\n            )\n        );\n    };\n\n    const toggleSubtasksVisibility = (taskId: number) => {\n        setMainTasksList(prevTasks =>\n            prevTasks.map(task =>\n                task.id === taskId\n                    ? { ...task, areSubtasksVisible: !task.areSubtasksVisible }\n                    : task\n            )\n        );\n    };\n\n    const removeMainTask = (taskId: number) => {\n        setMainTasksList(prevTasks =>\n            prevTasks.filter(task => task.id !== taskId)\n        );\n    };\n\n    const removeSubTask = (parentTaskId: number, subTaskId: number) => {\n        setMainTasksList(prevTasks =>\n            prevTasks.map(task =>\n                task.id === parentTaskId\n                    ? {\n                        ...task,\n                        subtasks: task.subtasks.filter(\n                            subTask => subTask.id !== subTaskId\n                        )\n                    }\n                    : task\n            )\n        );\n    };\n\n    const moveTask = (dragIndex: number, dropIndex: number) => {\n        if (dragIndex === dropIndex) return;\n        \n        setMainTasksList(prevTasks => {\n            const newTasks = [...prevTasks];\n            const draggedTask = newTasks[dragIndex];\n            newTasks.splice(dragIndex, 1);\n            newTasks.splice(dropIndex, 0, draggedTask);\n\n            return newTasks;\n        });\n    };\n\n    const handleDragStart = (e: React.DragEvent, index: number) => {\n        e.dataTransfer.setData('text/plain', index.toString());\n        e.dataTransfer.effectAllowed = 'move';\n    };\n\n    const handleDragOver = (e: React.DragEvent) => {\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'move';\n    };\n\n    const handleDrop = (e: React.DragEvent, dropIndex: number) => {\n        e.preventDefault();\n        const dragIndex = parseInt(e.dataTransfer.getData('text/plain'));\n        moveTask(dragIndex, dropIndex);\n    };\n\n    return (\n        <div className=\"sphere-page\">\n            <div className=\"bg-aurora\" />\n            <header className=\"header-simple\">\n                <button className=\"back-btn\" onClick={() => router.back()}>\n                    ‚Üê\n                </button>\n                <div className=\"hero-compact\">\n                    <div className=\"hero-icon\">{relationsSphereConfig.icon}</div>\n                    <h1>{relationsSphereConfig.title}</h1>\n                </div>\n            </header>\n\n            <main className=\"main-content\">\n                <div className=\"tasks-container\">\n                    {mainTasksList.length === 0 ? (\n                        <div className=\"empty-state\">\n                            <p>–°–æ–∑–¥–∞–π –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É</p>\n                        </div>\n                    ) : (\n                        <div className=\"tasks-scrollable\">\n                            <ul className=\"tasks-list\">\n                                {mainTasksList.map((task, index) => (\n                                    <li \n                                        key={task.id} \n                                        className=\"task-item\"\n                                        draggable\n                                        onDragStart={(e) => handleDragStart(e, index)}\n                                        onDragOver={handleDragOver}\n                                        onDrop={(e) => handleDrop(e, index)}\n                                    >\n                                        <div className=\"task-main\">\n                                            <label className=\"task-checkbox\">\n                                                <input\n                                                    type=\"checkbox\"\n                                                    checked={task.isCompleted}\n                                                    onChange={() =>\n                                                        toggleMainTaskCompletion(task.id)\n                                                    }\n                                                />\n                                                <span className=\"custom-checkbox\" />\n                                                <span\n                                                    className={`task-text ${\n                                                        task.isCompleted ? \"done\" : \"\"\n                                                    }`}\n                                                >\n                                                    {task.description}\n                                                    {task.subtasks.length > 0 && (\n                                                        <span\n                                                            style={{\n                                                                opacity: 0.7,\n                                                                fontSize: \"0.8em\",\n                                                                marginLeft: \"0.5rem\",\n                                                                fontWeight: 500\n                                                            }}\n                                                        >\n                                                            ({task.subtasks.length})\n                                                        </span>\n                                                    )}\n                                                </span>\n                                            </label>\n                                            <div className=\"task-actions\">\n                                                <button\n                                                    className=\"subtasks-toggle\"\n                                                    onClick={() =>\n                                                        toggleSubtasksVisibility(task.id)\n                                                    }\n                                                >\n                                                    {task.areSubtasksVisible ? \"‚àí\" : \"+\"}\n                                                </button>\n                                                <button\n                                                    className=\"delete-btn\"\n                                                    onClick={() =>\n                                                        removeMainTask(task.id)\n                                                    }\n                                                >\n                                                    √ó\n                                                </button>\n                                            </div>\n                                        </div>\n                                        <div\n                                            className={`subtasks-content ${\n                                                task.areSubtasksVisible ? \"expanded\" : \"\"\n                                            }`}\n                                        >\n                                            {task.subtasks.length > 0 && (\n                                                <ul className=\"subtasks-list\">\n                                                    {task.subtasks.map(subTask => (\n                                                        <li\n                                                            key={subTask.id}\n                                                            className=\"subtask-item\"\n                                                        >\n                                                            <label className=\"subtask-checkbox\">\n                                                                <input\n                                                                    type=\"checkbox\"\n                                                                    checked={\n                                                                        subTask.isCompleted\n                                                                    }\n                                                                    onChange={() =>\n                                                                        toggleSubTaskCompletion(\n                                                                            task.id,\n                                                                            subTask.id\n                                                                        )\n                                                                    }\n                                                                />\n                                                                <span className=\"custom-subcheckbox\" />\n                                                                <span\n                                                                    className={`subtask-text ${\n                                                                        subTask.isCompleted\n                                                                            ? \"done\"\n                                                                            : \"\"\n                                                                    }`}\n                                                                >\n                                                                    {subTask.description}\n                                                                </span>\n                                                            </label>\n                                                            <button\n                                                                className=\"delete-sub-btn\"\n                                                                onClick={() =>\n                                                                    removeSubTask(\n                                                                        task.id,\n                                                                        subTask.id\n                                                                    )\n                                                                }\n                                                            >\n                                                                √ó\n                                                            </button>\n                                                        </li>\n                                                    ))}\n                                                </ul>\n                                            )}\n\n                                            <div className=\"add-subtask-section\">\n                                                <input\n                                                    className=\"subtask-input\"\n                                                    value={newSubTaskDescription}\n                                                    onChange={e =>\n                                                        setNewSubTaskDescription(\n                                                            e.target.value\n                                                        )\n                                                    }\n                                                    placeholder=\"–ü–æ–¥–∑–∞–¥–∞—á–∞...\"\n                                                    onKeyDown={e =>\n                                                        e.key === \"Enter\" &&\n                                                        createSubTask(task.id)\n                                                    }\n                                                />\n                                                <button\n                                                    className=\"add-sub-btn\"\n                                                    onClick={() =>\n                                                        createSubTask(task.id)\n                                                    }\n                                                >\n                                                    –î–æ–±–∞–≤–∏—Ç—å\n                                                </button>\n                                            </div>\n                                        </div>\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"add-task-section\">\n                    <input\n                        className=\"task-input\"\n                        value={newMainTaskDescription}\n                        onChange={e =>\n                            setNewMainTaskDescription(e.target.value)\n                        }\n                        placeholder=\"–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–æ–∑–≤–æ–Ω–∏—Ç—å –≤ –æ–±–µ–¥\"\n                        onKeyDown={e => e.key === \"Enter\" && createMainTask()}\n                    />\n                    <button className=\"add-btn\" onClick={createMainTask}>\n                        –î–æ–±–∞–≤–∏—Ç—å\n                    </button>\n                </div>\n            </main>\n        </div>\n    );\n}"],"names":[],"mappings":"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"}}]
}